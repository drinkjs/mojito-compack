"use strict";(()=>{(self.webpackChunkmojito_element=self.webpackChunkmojito_element||[]).push([[108],{8108:(De,ue,d)=>{d.d(ue,{F8:()=>Xe});var e=d(4991),n=d(5888),v=d(3117),b=d(507),N=d(9423),J=d(3406),ce=d(7373),de=d(3083),fe="Expected a function";function ve(l,i,t){var a=!0,c=!0;if(typeof l!="function")throw new TypeError(fe);return(0,de.Z)(t)&&(a="leading"in t?!!t.leading:a,c="trailing"in t?!!t.trailing:c),(0,ce.Z)(l,i,{leading:a,maxWait:i,trailing:c})}const Q=ve;var E=d(6328),I=d(3740),H=d(4877);const le=l=>l;var D=d(978);const me=(0,H.o8)({urlList:{type:(0,H.Cq)(Array),default:()=>le([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),ge={close:()=>!0,switch:l=>(0,D.hj)(l)};var oe=d(2855),se=d(3398),ae=d(1003),pe=d(9470),O=d(215),we=d(1200);const he=["src"],ye=(0,e.aZ)({name:"ElImageViewer"}),Se=(0,e.aZ)({...ye,props:me,emits:ge,setup(l,{expose:i,emit:t}){const a=l,c={CONTAIN:{name:"contain",icon:(0,n.Xl)(I.ITT)},ORIGINAL:{name:"original",icon:(0,n.Xl)(I.rGh)}},{t:m}=(0,se.bU)(),u=(0,ae.s3)("image-viewer"),{nextZIndex:R}=(0,pe.Cn)(),U=(0,n.iH)(),S=(0,n.iH)([]),k=(0,n.B)(),C=(0,n.iH)(!0),p=(0,n.iH)(a.initialIndex),w=(0,n.XI)(c.CONTAIN),g=(0,n.iH)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),F=(0,e.Fl)(()=>{const{urlList:o}=a;return o.length<=1}),x=(0,e.Fl)(()=>p.value===0),$=(0,e.Fl)(()=>p.value===a.urlList.length-1),q=(0,e.Fl)(()=>a.urlList[p.value]),_=(0,e.Fl)(()=>[u.e("btn"),u.e("prev"),u.is("disabled",!a.infinite&&x.value)]),Y=(0,e.Fl)(()=>[u.e("btn"),u.e("next"),u.is("disabled",!a.infinite&&$.value)]),ee=(0,e.Fl)(()=>{const{scale:o,deg:r,offsetX:f,offsetY:h,enableTransition:L}=g.value;let y=f/o,z=h/o;switch(r%360){case 90:case-270:[y,z]=[z,-y];break;case 180:case-180:[y,z]=[-y,-z];break;case 270:case-90:[y,z]=[-z,y];break}const W={transform:`scale(${o}) rotate(${r}deg) translate(${y}px, ${z}px)`,transition:L?"transform .3s":""};return w.value.name===c.CONTAIN.name&&(W.maxWidth=W.maxHeight="100%"),W}),j=(0,e.Fl)(()=>(0,D.hj)(a.zIndex)?a.zIndex:R());function T(){ne(),t("close")}function te(){const o=Q(f=>{switch(f.code){case O.n.esc:a.closeOnPressEscape&&T();break;case O.n.space:Z();break;case O.n.left:K();break;case O.n.up:s("zoomIn");break;case O.n.right:G();break;case O.n.down:s("zoomOut");break}}),r=Q(f=>{const h=f.deltaY||f.deltaX;s(h<0?"zoomIn":"zoomOut",{zoomRate:a.zoomRate,enableTransition:!1})});k.run(()=>{(0,N.ORN)(document,"keydown",o),(0,N.ORN)(document,"wheel",r)})}function ne(){k.stop()}function B(){C.value=!1}function M(o){C.value=!1,o.target.alt=m("el.image.error")}function V(o){if(C.value||o.button!==0||!U.value)return;g.value.enableTransition=!1;const{offsetX:r,offsetY:f}=g.value,h=o.pageX,L=o.pageY,y=Q(W=>{g.value={...g.value,offsetX:r+W.pageX-h,offsetY:f+W.pageY-L}}),z=(0,N.ORN)(document,"mousemove",y);(0,N.ORN)(document,"mouseup",()=>{z()}),o.preventDefault()}function A(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Z(){if(C.value)return;const o=(0,we.uc)(c),r=Object.values(c),f=w.value.name,L=(r.findIndex(y=>y.name===f)+1)%o.length;w.value=c[o[L]],A()}function X(o){const r=a.urlList.length;p.value=(o+r)%r}function K(){x.value&&!a.infinite||X(p.value-1)}function G(){$.value&&!a.infinite||X(p.value+1)}function s(o,r={}){if(C.value)return;const{zoomRate:f,rotateDeg:h,enableTransition:L}={zoomRate:a.zoomRate,rotateDeg:90,enableTransition:!0,...r};switch(o){case"zoomOut":g.value.scale>.2&&(g.value.scale=Number.parseFloat((g.value.scale/f).toFixed(3)));break;case"zoomIn":g.value.scale<7&&(g.value.scale=Number.parseFloat((g.value.scale*f).toFixed(3)));break;case"clockwise":g.value.deg+=h;break;case"anticlockwise":g.value.deg-=h;break}g.value.enableTransition=L}return(0,e.YP)(q,()=>{(0,e.Y3)(()=>{const o=S.value[0];o?.complete||(C.value=!0)})}),(0,e.YP)(p,o=>{A(),t("switch",o)}),(0,e.bv)(()=>{var o,r;te(),(r=(o=U.value)==null?void 0:o.focus)==null||r.call(o)}),i({setActiveItem:X}),(o,r)=>((0,e.wg)(),(0,e.j4)(e.lR,{to:"body",disabled:!o.teleported},[(0,e.Wm)(J.uT,{name:"viewer-fade",appear:""},{default:(0,e.w5)(()=>[(0,e._)("div",{ref_key:"wrapper",ref:U,tabindex:-1,class:(0,v.C_)((0,n.SU)(u).e("wrapper")),style:(0,v.j5)({zIndex:(0,n.SU)(j)})},[(0,e._)("div",{class:(0,v.C_)((0,n.SU)(u).e("mask")),onClick:r[0]||(r[0]=(0,J.iM)(f=>o.hideOnClickModal&&T(),["self"]))},null,2),(0,e.kq)(" CLOSE "),(0,e._)("span",{class:(0,v.C_)([(0,n.SU)(u).e("btn"),(0,n.SU)(u).e("close")]),onClick:T},[(0,e.Wm)((0,n.SU)(E.gn),null,{default:(0,e.w5)(()=>[(0,e.Wm)((0,n.SU)(I.x8P))]),_:1})],2),(0,e.kq)(" ARROW "),(0,n.SU)(F)?(0,e.kq)("v-if",!0):((0,e.wg)(),(0,e.iD)(e.HY,{key:0},[(0,e._)("span",{class:(0,v.C_)((0,n.SU)(_)),onClick:K},[(0,e.Wm)((0,n.SU)(E.gn),null,{default:(0,e.w5)(()=>[(0,e.Wm)((0,n.SU)(I.XdH))]),_:1})],2),(0,e._)("span",{class:(0,v.C_)((0,n.SU)(Y)),onClick:G},[(0,e.Wm)((0,n.SU)(E.gn),null,{default:(0,e.w5)(()=>[(0,e.Wm)((0,n.SU)(I.olP))]),_:1})],2)],64)),(0,e.kq)(" ACTIONS "),(0,e._)("div",{class:(0,v.C_)([(0,n.SU)(u).e("btn"),(0,n.SU)(u).e("actions")])},[(0,e._)("div",{class:(0,v.C_)((0,n.SU)(u).e("actions__inner"))},[(0,e.Wm)((0,n.SU)(E.gn),{onClick:r[1]||(r[1]=f=>s("zoomOut"))},{default:(0,e.w5)(()=>[(0,e.Wm)((0,n.SU)(I.H9A))]),_:1}),(0,e.Wm)((0,n.SU)(E.gn),{onClick:r[2]||(r[2]=f=>s("zoomIn"))},{default:(0,e.w5)(()=>[(0,e.Wm)((0,n.SU)(I.DYM))]),_:1}),(0,e._)("i",{class:(0,v.C_)((0,n.SU)(u).e("actions__divider"))},null,2),(0,e.Wm)((0,n.SU)(E.gn),{onClick:Z},{default:(0,e.w5)(()=>[((0,e.wg)(),(0,e.j4)((0,e.LL)((0,n.SU)(w).icon)))]),_:1}),(0,e._)("i",{class:(0,v.C_)((0,n.SU)(u).e("actions__divider"))},null,2),(0,e.Wm)((0,n.SU)(E.gn),{onClick:r[3]||(r[3]=f=>s("anticlockwise"))},{default:(0,e.w5)(()=>[(0,e.Wm)((0,n.SU)(I.Ufu))]),_:1}),(0,e.Wm)((0,n.SU)(E.gn),{onClick:r[4]||(r[4]=f=>s("clockwise"))},{default:(0,e.w5)(()=>[(0,e.Wm)((0,n.SU)(I.Vyf))]),_:1})],2)],2),(0,e.kq)(" CANVAS "),(0,e._)("div",{class:(0,v.C_)((0,n.SU)(u).e("canvas"))},[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(o.urlList,(f,h)=>(0,e.wy)(((0,e.wg)(),(0,e.iD)("img",{ref_for:!0,ref:L=>S.value[h]=L,key:f,src:f,style:(0,v.j5)((0,n.SU)(ee)),class:(0,v.C_)((0,n.SU)(u).e("img")),onLoad:B,onError:M,onMousedown:V},null,46,he)),[[J.F8,h===p.value]])),128))],2),(0,e.WI)(o.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var Ce=(0,oe.Z)(Se,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]),ie=d(5154);const be=(0,ie.nz)(Ce),Ie=(0,H.o8)({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:(0,H.Cq)([String,Object])},previewSrcList:{type:(0,H.Cq)(Array),default:()=>le([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Ue={load:l=>l instanceof Event,error:l=>l instanceof Event,switch:l=>(0,D.hj)(l),close:()=>!0,show:()=>!0};var ke=d(1048),Le=d(3903);const ze=["class","style"],Ee=/^on[A-Z]/,Te=(l={})=>{const{excludeListeners:i=!1,excludeKeys:t}=l,a=(0,e.Fl)(()=>(t?.value||[]).concat(ze)),c=(0,e.FN)();return c?(0,e.Fl)(()=>{var m;return(0,ke.Z)(Object.entries((m=c.proxy)==null?void 0:m.$attrs).filter(([u])=>!a.value.includes(u)&&!(i&&Ee.test(u))))}):((0,Le.N)("use-attrs","getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function"),(0,e.Fl)(()=>({})))},Ne=(l,i)=>{if(!b.C5||!l||!i)return!1;const t=l.getBoundingClientRect();let a;return i instanceof Element?a=i.getBoundingClientRect():a={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<a.bottom&&t.bottom>a.top&&t.right>a.left&&t.left<a.right},re=l=>{let i=0,t=l;for(;t;)i+=t.offsetTop,t=t.offsetParent;return i},Pe=(l,i)=>Math.abs(re(l)-re(i)),$e=l=>{let i,t;return l.type==="touchend"?(t=l.changedTouches[0].clientY,i=l.changedTouches[0].clientX):l.type.startsWith("touch")?(t=l.touches[0].clientY,i=l.touches[0].clientX):(t=l.clientY,i=l.clientX),{clientX:i,clientY:t}};var Oe=d(1490);const xe=(l,i)=>{if(!b.C5)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(i)],a=(0,Oe.C2)(l,t);return["scroll","auto","overlay"].some(c=>a.includes(c))},We=(l,i)=>{if(!b.C5)return;let t=l;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(xe(t,i))return t;t=t.parentNode}return t};let P;const je=l=>{var i;if(!isClient)return 0;if(P!==void 0)return P;const t=document.createElement("div");t.className=`${l}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const a=t.offsetWidth;t.style.overflow="scroll";const c=document.createElement("div");c.style.width="100%",t.appendChild(c);const m=c.offsetWidth;return(i=t.parentNode)==null||i.removeChild(t),P=a-m,P};function Be(l,i){if(!isClient)return;if(!i){l.scrollTop=0;return}const t=[];let a=i.offsetParent;for(;a!==null&&l!==a&&l.contains(a);)t.push(a),a=a.offsetParent;const c=i.offsetTop+t.reduce((U,S)=>U+S.offsetTop,0),m=c+i.offsetHeight,u=l.scrollTop,R=u+l.clientHeight;c<u?l.scrollTop=c:m>R&&(l.scrollTop=m-l.clientHeight)}const He=["src","loading"],Re={key:0},Fe=(0,e.aZ)({name:"ElImage",inheritAttrs:!1}),Ye=(0,e.aZ)({...Fe,props:Ie,emits:Ue,setup(l,{emit:i}){const t=l;let a="";const{t:c}=(0,se.bU)(),m=(0,ae.s3)("image"),u=(0,e.l1)(),R=Te(),U=(0,n.iH)(),S=(0,n.iH)(!1),k=(0,n.iH)(!0),C=(0,n.iH)(!1),p=(0,n.iH)(),w=(0,n.iH)(),g=b.C5&&"loading"in HTMLImageElement.prototype;let F,x;const $=(0,e.Fl)(()=>[m.e("inner"),Y.value&&m.e("preview"),k.value&&m.is("loading")]),q=(0,e.Fl)(()=>u.style),_=(0,e.Fl)(()=>{const{fit:s}=t;return b.C5&&s?{objectFit:s}:{}}),Y=(0,e.Fl)(()=>{const{previewSrcList:s}=t;return Array.isArray(s)&&s.length>0}),ee=(0,e.Fl)(()=>{const{previewSrcList:s,initialIndex:o}=t;let r=o;return o>s.length-1&&(r=0),r}),j=(0,e.Fl)(()=>t.loading==="eager"?!1:!g&&t.loading==="lazy"||t.lazy),T=()=>{b.C5&&(k.value=!0,S.value=!1,U.value=t.src)};function te(s){k.value=!1,S.value=!1,i("load",s)}function ne(s){k.value=!1,S.value=!0,i("error",s)}function B(){Ne(p.value,w.value)&&(T(),A())}const M=(0,b.vA)(B,200,!0);async function V(){var s;if(!b.C5)return;await(0,e.Y3)();const{scrollContainer:o}=t;(0,D.kK)(o)?w.value=o:(0,v.HD)(o)&&o!==""?w.value=(s=document.querySelector(o))!=null?s:void 0:p.value&&(w.value=We(p.value)),w.value&&(F=(0,N.ORN)(w,"scroll",M),setTimeout(()=>B(),100))}function A(){!b.C5||!w.value||!M||(F?.(),w.value=void 0)}function Z(s){if(s.ctrlKey){if(s.deltaY<0)return s.preventDefault(),!1;if(s.deltaY>0)return s.preventDefault(),!1}}function X(){Y.value&&(x=(0,N.ORN)("wheel",Z,{passive:!1}),a=document.body.style.overflow,document.body.style.overflow="hidden",C.value=!0,i("show"))}function K(){x?.(),document.body.style.overflow=a,C.value=!1,i("close")}function G(s){i("switch",s)}return(0,e.YP)(()=>t.src,()=>{j.value?(k.value=!0,S.value=!1,A(),V()):T()}),(0,e.bv)(()=>{j.value?V():T()}),(s,o)=>((0,e.wg)(),(0,e.iD)("div",{ref_key:"container",ref:p,class:(0,v.C_)([(0,n.SU)(m).b(),s.$attrs.class]),style:(0,v.j5)((0,n.SU)(q))},[S.value?(0,e.WI)(s.$slots,"error",{key:0},()=>[(0,e._)("div",{class:(0,v.C_)((0,n.SU)(m).e("error"))},(0,v.zw)((0,n.SU)(c)("el.image.error")),3)]):((0,e.wg)(),(0,e.iD)(e.HY,{key:1},[U.value!==void 0?((0,e.wg)(),(0,e.iD)("img",(0,e.dG)({key:0},(0,n.SU)(R),{src:U.value,loading:s.loading,style:(0,n.SU)(_),class:(0,n.SU)($),onClick:X,onLoad:te,onError:ne}),null,16,He)):(0,e.kq)("v-if",!0),k.value?((0,e.wg)(),(0,e.iD)("div",{key:1,class:(0,v.C_)((0,n.SU)(m).e("wrapper"))},[(0,e.WI)(s.$slots,"placeholder",{},()=>[(0,e._)("div",{class:(0,v.C_)((0,n.SU)(m).e("placeholder"))},null,2)])],2)):(0,e.kq)("v-if",!0)],64)),(0,n.SU)(Y)?((0,e.wg)(),(0,e.iD)(e.HY,{key:2},[C.value?((0,e.wg)(),(0,e.j4)((0,n.SU)(be),{key:0,"z-index":s.zIndex,"initial-index":(0,n.SU)(ee),infinite:s.infinite,"zoom-rate":s.zoomRate,"url-list":s.previewSrcList,"hide-on-click-modal":s.hideOnClickModal,teleported:s.previewTeleported,"close-on-press-escape":s.closeOnPressEscape,onClose:K,onSwitch:G},{default:(0,e.w5)(()=>[s.$slots.viewer?((0,e.wg)(),(0,e.iD)("div",Re,[(0,e.WI)(s.$slots,"viewer")])):(0,e.kq)("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):(0,e.kq)("v-if",!0)],64)):(0,e.kq)("v-if",!0)],6))}});var Ae=(0,oe.Z)(Ye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Xe=(0,ie.nz)(Ae)}}]);})();
